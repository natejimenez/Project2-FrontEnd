
<div class="grid-container">
    <div class="ticketsTable">
        <button mat-raised-button color="primary" (click)="refreshTechs()">Refresh Technicians</button>

        <table mat-table [dataSource]="technicians">
    
            <ng-container matColumnDef="id">
                <th mat-header-cell *matHeaderCellDef>ID</th>
                <td mat-cell *matCellDef="let technician">{{technician.id}}</td>
            </ng-container>
        
            <ng-container matColumnDef="dispname">
                <th mat-header-cell *matHeaderCellDef>D. Name</th>
                <td mat-cell *matCellDef="let technician">{{technician.displayName}}</td>
            </ng-container>
            
            <ng-container matColumnDef="uname">
                <th mat-header-cell *matHeaderCellDef>U. Name</th>
                <td mat-cell *matCellDef="let technician">{{technician.userName}}</td>
            </ng-container>
            
            <ng-container matColumnDef="type">
                <th mat-header-cell *matHeaderCellDef>Type</th>
                <td mat-cell *matCellDef="let technician">{{technician.type}}</td>
            </ng-container>

            <ng-container matColumnDef="tickets">
                <th mat-header-cell *matHeaderCellDef>Get Tickets</th>
                <td mat-cell *matCellDef="let technician"><button mat-raised-button color="primary" (click) = "getTicketsOfTech(technician.id)">Get Tickets</button></td>
            </ng-container>
            
            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
            
        </table>
    </div>

    <div class="ticketDetails">
        <h2>All Tickets for Selected Technician</h2>

        <table mat-table [dataSource]="tickets">
        
            <ng-container matColumnDef="id">
                <th mat-header-cell *matHeaderCellDef>Ticket ID</th>
                <td mat-cell *matCellDef="let ticket">{{ticket.ticketId}}</td>
            </ng-container>
            
            <ng-container matColumnDef="description">
                <th mat-header-cell *matHeaderCellDef>Description</th>
                <td mat-cell *matCellDef="let ticket">{{ticket.description}}</td>
            </ng-container>
            
            <ng-container matColumnDef="start">
                <th mat-header-cell *matHeaderCellDef>Epoch Start</th>
                <td mat-cell *matCellDef="let ticket">{{ticket.epochStart | date:'medium'}}</td>
            </ng-container>
            
            <ng-container matColumnDef="end">
                <th mat-header-cell *matHeaderCellDef>Epoch End</th>
                <td mat-cell *matCellDef="let ticket">                    
                <div *ngIf="ticket.epochEnd>0; else elseBlock">
                    {{ticket.epochEnd | date:'medium'}}
                  </div>
                  <ng-template #elseBlock>
                    Pending
                  </ng-template></td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns2; sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns2"></tr>
            
        </table>





        <!-- <table>

            <thead><th>ID</th><th>Description</th><th>Date Submitted</th><th>Date Completed</th></thead>
        <tbody>
            <tr *ngFor="let ticket of tickets">
                
        
                <td>{{ticket.ticketId}}</td>
                <td>{{ticket.description}}</td>
                <td>{{ticket.epochStart | date:'medium'}}</td>
                <td>
                    <div *ngIf="ticket.epochEnd>0; else elseBlock">
                        {{ticket.epochEnd | date:'medium'}}
                      </div>
                      <ng-template #elseBlock>
                        Pending
                      </ng-template>
        
                    </td>
            </tr>
        </tbody>
        
        </table> -->
    </div>
  </div>



